# ========================================
# RTSP Stream Configuration
# ========================================
# 단일 스트림 모드 (run_pipeline.py 사용 시)
# Serial number is automatically extracted from URL path (e.g., /99999999 -> "99999999")
MEDIA_RPI_RTSP_URL=rtsp://k13e106.p.ssafy.io:8554/99999999

# 멀티 스트림 모드 (run_multi_pipeline.py 사용 시)
# 쉼표로 구분된 스트림 ID 리스트 (예: RTSP_STREAMS=99999999,88888888)
# Note: 88888888 스트림은 존재하지 않음 - 실제 스트림 ID로 변경 필요
RTSP_STREAMS=99999999,00000000
# RTSP 베이스 URL (스트림 ID가 뒤에 붙음)
# mediaMTX 경로: /stream/ 프리픽스 없이 시리얼 번호만
RTSP_BASE_URL=rtsp://k13e106.p.ssafy.io:8554

# ========================================
# Backend API Configuration
# ========================================
# FastAPI endpoint that receives events (include /events path)
# Nginx routes /dev/api/ -> http://localhost:8181/, so we need /dev/api/ai/events
FASTAPI_ENDPOINT=https://k13e106.p.ssafy.io/ai/events

FASTAPI_TOKEN=

# (Optional) Manual serial number override - if not set, extracted from RTSP URL
# SCARECROW_SERIAL_NUMBER=00000000

# Model and artifact paths
YOLO_MODEL_PATH=models/best.pt
MEDIA_OUTPUT_ROOT=./artifacts
YOLO_CONF_THRESHOLD=0.7
YOLO_IOU_THRESHOLD=0.45
YOLO_HUMAN_MODEL_PATH=models/yolo12s.pt
YOLO_HUMAN_CONF_THRESHOLD=0.7
YOLO_HUMAN_IOU_THRESHOLD=0.45
HUMAN_SKIP_CONF_THRESHOLD=0.7
YOLO_POSE_MODEL_PATH=models/rtmpose_body2d/job_jp0l2r8np_optimized_onnx/model.onnx
YOLO_POSE_CONF_THRESHOLD=0.35
# MediaPipe + SVM pose estimation (set USE_MEDIAPIPE_SVM=true to enable)
SVM_POSE_MODEL_PATH=models/svm_model_sit_stand_lie.pkl
USE_MEDIAPIPE_SVM=true
MEDIAPIPE_MIN_DETECTION_CONFIDENCE=0.5
MEDIAPIPE_MIN_TRACKING_CONFIDENCE=0.5
POSE_KEYPOINT_CONF_THRESHOLD=0.002
POSE_LYING_ASPECT_RATIO=0.65
POSE_LYING_TORSO_ANGLE_DEG=35
POSE_HEATSTROKE_WATCH_SECONDS=60
POSE_HEATSTROKE_ALERT_SECONDS=120
POSE_STATE_IDLE_TTL_SECONDS=120
POSE_STATE_MIN_CONFIDENCE=0.35
INCLUDE_SNAPSHOT=true

# Event filter
# true로 설정하면 변화가 있을 때만 이벤트 전송 (중복 제거)
# false로 설정하면 매 프레임마다 이벤트 전송 (모든 추론 결과 전송)
EVENT_FILTER_ENABLED=true
EVENT_FILTER_POSE_CHANGE=true           # 자세 변경시 전송 (서있다가 앉으면)
EVENT_FILTER_PRESENCE_CHANGE=true       # 사람/동물 등장/사라질 때 전송
EVENT_FILTER_IMPORTANT_STATUS=true      # 넘어짐/온열질환 항상 전송
EVENT_FILTER_POSITION_CHANGE=false      # 위치 이동시 전송 (현재 비활성화)
EVENT_FILTER_POSITION_THRESHOLD=120     # 위치 이동 판단 기준 (픽셀)

# Runtime flags
GPU_ENABLED=true
DEFAULT_FPS=1           # 초당 1번만 추론 실행
# STREAM_DEFAULT_FPS is kept as a backward-compatible alias for DEFAULT_FPS
LISTENER_FPS=25         # RTSP에서 초당 25프레임 읽기 (버퍼 오버런 방지)
