# ========================================
# RTSP Stream Configuration
# ========================================
# 단일 스트림 모드 (run_pipeline.py 사용 시)
# Serial number is automatically extracted from URL path (e.g., /99999999 -> "99999999")
MEDIA_RPI_RTSP_URL=rtsp://k13e106.p.ssafy.io:8554/00000000

# 멀티 스트림 모드 (run_multi_pipeline.py 사용 시)
# 쉼표로 구분된 스트림 ID 리스트
RTSP_STREAMS=00000000,99999999
# RTSP 베이스 URL (스트림 ID가 뒤에 붙음)
# mediaMTX 경로: /stream/ 프리픽스 없이 시리얼 번호만
RTSP_BASE_URL=rtsp://k13e106.p.ssafy.io:8554

# ========================================
# Backend API Configuration
# ========================================
# FastAPI endpoint that receives events (include /events path)
# Nginx routes /dev/api/ -> http://localhost:8181/, so we need /dev/api/ai/events
FASTAPI_ENDPOINT=https://k13e106.p.ssafy.io/ai/events
# FASTAPI_TOKEN=local-dev-token  # 백엔드에서 permit 열어놨음

# (Optional) Manual serial number override - if not set, extracted from RTSP URL
# SCARECROW_SERIAL_NUMBER=00000000

# Model and artifact paths
YOLO_MODEL_PATH=models/best.pt
MEDIA_OUTPUT_ROOT=./artifacts
YOLO_CONF_THRESHOLD=0.4
YOLO_IOU_THRESHOLD=0.45
YOLO_HUMAN_MODEL_PATH=models/yolo12s.pt
YOLO_HUMAN_CONF_THRESHOLD=0.35
YOLO_HUMAN_IOU_THRESHOLD=0.45
HUMAN_SKIP_CONF_THRESHOLD=0.7
YOLO_POSE_MODEL_PATH=models/rtmpose_body2d/job_jp0l2r8np_optimized_onnx/model.onnx
YOLO_POSE_CONF_THRESHOLD=0.35
# MediaPipe + SVM pose estimation (set USE_MEDIAPIPE_SVM=true to enable)
SVM_POSE_MODEL_PATH=models/svm_model_sit_stand_lie.pkl
USE_MEDIAPIPE_SVM=true
MEDIAPIPE_MIN_DETECTION_CONFIDENCE=0.5
MEDIAPIPE_MIN_TRACKING_CONFIDENCE=0.5
POSE_KEYPOINT_CONF_THRESHOLD=0.002
POSE_LYING_ASPECT_RATIO=0.65
POSE_LYING_TORSO_ANGLE_DEG=35
POSE_HEATSTROKE_WATCH_SECONDS=300
POSE_HEATSTROKE_ALERT_SECONDS=900
POSE_STATE_IDLE_TTL_SECONDS=120
POSE_STATE_MIN_CONFIDENCE=0.35
INCLUDE_SNAPSHOT=true

# Event filter
EVENT_FILTER_ENABLED=true
EVENT_FILTER_POSE_CHANGE=true
EVENT_FILTER_PRESENCE_CHANGE=true
EVENT_FILTER_IMPORTANT_STATUS=true
EVENT_FILTER_POSITION_CHANGE=false
EVENT_FILTER_POSITION_THRESHOLD=120

# Runtime flags
GPU_ENABLED=false
DEFAULT_FPS=0.3
# STREAM_DEFAULT_FPS is kept as a backward-compatible alias for DEFAULT_FPS
